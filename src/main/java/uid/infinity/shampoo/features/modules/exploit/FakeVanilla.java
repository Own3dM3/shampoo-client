package uid.infinity.shampoo.features.modules.exploit;

import com.google.common.eventbus.Subscribe;
import uid.infinity.shampoo.event.impl.PacketEvent;
import uid.infinity.shampoo.features.modules.Module;
import uid.infinity.shampoo.mixin.CustomPayloadC2SPacketAccessor;
import net.minecraft.network.packet.BrandCustomPayload;
import net.minecraft.network.packet.c2s.common.CustomPayloadC2SPacket;


public class FakeVanilla extends Module {
    public FakeVanilla() {
        super("FakeVanilla", "Fake vanilla on servers", Category.EXPLOIT, true, false, false);
    }
    @Subscribe public void onPacket(PacketEvent.Send event) {
        if (fullNullCheck()) return;
        if (event.getPacket() instanceof CustomPayloadC2SPacket packet) {
            if (!packet.payload().getId().id().equals(BrandCustomPayload.ID.id())) return;
            ((CustomPayloadC2SPacketAccessor) (Object) packet).setPayload(new BrandCustomPayload("vanilla"));
        }
    }
}